## 前端项目优化

### 前端工程构建工具

随着前后端分离以来，在一个项目开发的过程中，前端工程师需要维护的代码越来越庞大，代码维护、打包、发布等流程也变得极为繁琐，同时浪费的时间和精力也会越来越多。并且这些过程都是人工手动完成的，人为的错误也随着流程的增加而增加。在这种情况下，许多自动化前端构建工具也就诞生了。

比如：百度的 [fis](http://fis.baidu.com/)，以及 [Gulp](https://www.gulpjs.com.cn/)、[Grunt](https://www.gruntjs.net/)，以及后面我们在此次培训中主要用到的打包工具 [webpack](https://webpack.docschina.org/)。

这篇文档会主要讲在使用 webpack 构建前端项目中会用到的一些可以优化我们项目的地方，文档内容可能会有一些遗漏或错误的地方，欢迎大家补充和指正。

> 这篇文档会默认大家对 webpack 已经有了一定的了解。大家可以去[webapck 官网](https://webpack.docschina.org/)上查阅，也可以看我以前写的一篇文档[Webpack 基础](https://www.yuque.com/docs/share/a8498ebf-5a7f-4136-92b7-fb56063166ab?#)

### 项目打包

一般情况下，项目打包就是将我们项目中的文件合并压缩。但是在前端项目中我们又不能一味地让所有的文件全都合并成一个文件，那么这一个文件的体积就会非常大，加载慢而且还会出现加载失败的情况。所以我们在合并文件的基础上还得做好文件的拆分。

#### 文件合并与拆分

在 webpack 中，如果我们使用的是 webpack 默认配置的话，那么所有的 js 文件都会打包成一个文件。

```js
module.exports = {
  // 省略其他配置...
  entry: "./src/index.js",
  output: {
    filename: "app.[hash].js",
    path: path.resolve(__dirname, "dist"),
  },
  // 省略其他配置...
};
```

![1.png](./webpack-image/1.png)

我们可以看到 app.js 文件非常大，超过了 10M。这样的文件对于前端项目来说是一个巨大的风险，它会影响到我们项目的加载时间，甚至会出现在网络不好的情况下加载失败。

对于这种情况，我们一般会将文件拆分成小的文件，以方便浏览器加载。

#### 文件压缩

#### 源代码映射功能

### 文件加载

#### CDN

#### defer 与 async

#### 动态加载

#### 缓存

### 首屏加载

### 其他网络请求
